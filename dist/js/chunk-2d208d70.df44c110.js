(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208d70"],{a704:function(t,e,l){"use strict";l.r(e);var d=l("7a23"),a={class:"d-flex justify-content-end mt-4"},c={class:"table mt-4"},o=Object(d["h"])("thead",null,[Object(d["h"])("tr",null,[Object(d["h"])("th",{width:"200"},"訂單建立時間"),Object(d["h"])("th",{width:"120"},"訂單編號"),Object(d["h"])("th",{width:"120"},"金額"),Object(d["h"])("th",{width:"120"},"付款狀態"),Object(d["h"])("th",{width:"200"},"付款時間"),Object(d["h"])("th",{width:"100"},"編輯")])],-1),n={key:0},s=Object(d["h"])("td",{class:"fst-italic text-center py-5",colspan:"6"},"無訂單",-1),r={class:"text-start"},i={key:0,class:"text-success"},b={key:1},h={key:0},O={key:1},u={class:"btn-group"},j={class:"d-flex justify-content-center"};function p(t,e,l,p,f,m){var v=Object(d["E"])("Pagination"),w=Object(d["E"])("OrderModal"),g=Object(d["E"])("OrderDelModal"),y=Object(d["E"])("OrderDelAllModal");return Object(d["w"])(),Object(d["d"])(d["a"],null,[Object(d["h"])("div",a,[Object(d["h"])("button",{class:["btn btn-danger text-white",{disabled:!f.orders.length}],onClick:e[1]||(e[1]=function(){return m.openDelAllModal&&m.openDelAllModal.apply(m,arguments)})},"刪除全部訂單",2)]),Object(d["h"])("table",c,[o,Object(d["h"])("tbody",null,[f.orders.length?Object(d["e"])("",!0):(Object(d["w"])(),Object(d["d"])("tr",n,[s])),(Object(d["w"])(!0),Object(d["d"])(d["a"],null,Object(d["D"])(f.orders,(function(t){return Object(d["w"])(),Object(d["d"])("tr",{key:t.id},[Object(d["h"])("td",null,Object(d["H"])(new Date(1e3*t.create_at).toLocaleString()),1),Object(d["h"])("td",null,Object(d["H"])(t.id),1),Object(d["h"])("td",r,Object(d["H"])(t.total),1),Object(d["h"])("td",null,[t.is_paid?(Object(d["w"])(),Object(d["d"])("span",i,"已付款")):(Object(d["w"])(),Object(d["d"])("span",b,"未付款"))]),Object(d["h"])("td",null,[t.is_paid?(Object(d["w"])(),Object(d["d"])("span",h,Object(d["H"])(new Date(1e3*t.paid_date).toLocaleString()),1)):(Object(d["w"])(),Object(d["d"])("span",O))]),Object(d["h"])("td",null,[Object(d["h"])("div",u,[Object(d["h"])("button",{type:"button",class:"btn btn-outline-dark btn-sm",onClick:function(e){return m.openModal(t.id)}}," 查看 ",8,["onClick"]),Object(d["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return m.openDelModal(t)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(d["h"])("div",j,[Object(d["h"])(v,{page:f.pagination,onGetProduct:m.getOrders},null,8,["page","onGetProduct"])]),Object(d["h"])(w,{ref:"modal",order:f.tempOrder},null,8,["order"]),Object(d["h"])(g,{ref:"delModal",order:f.tempOrder,onDelOrder:m.delOrder},null,8,["order","onDelOrder"]),Object(d["h"])(y,{ref:"delAllModal",onDelAllOrder:m.delAllOrder},null,8,["onDelAllOrder"])],64)}var f=l("5530"),m=(l("99af"),l("0eb3")),v=(l("b0c0"),{class:"modal fade",ref:"orderModal",id:"orderModal",tabindex:"-1","aria-labelledby":"orderModalLabel","aria-hidden":"true"}),w={class:"modal-dialog"},g={class:"modal-content"},y=Object(d["h"])("div",{class:"modal-header"},[Object(d["h"])("h5",{class:"modal-title",id:"orderModalLabel"},"訂單詳情"),Object(d["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),M={class:"modal-body"},x={class:"orderStatus border p-1"},k=Object(d["g"])(" 訂單編號:"),D=Object(d["g"])(" 付款狀態: "),H={key:0,class:"text-success"},A={key:1},$={class:"d-flex justify-content-between"},C={class:"orderUser w-100"},_=Object(d["h"])("h6",null,"訂購資訊",-1),L={class:"p-0"},S=Object(d["g"])(" 建立時間:"),E=Object(d["g"])(" email:"),P=Object(d["g"])(" 姓名:"),G=Object(d["g"])(" 手機:"),J=Object(d["g"])(" 地址:"),N=Object(d["g"])(" 備註:"),T={class:"orderContent w-100"},U=Object(d["h"])("h6",null,"訂單內容",-1),q={class:"table table-borderless"},z={rowspan:"3"},B={class:"p-0 text-start"},F={class:"p-0 text-start"},I={class:"p-0 text-start"},K={class:"text-end p-4",colspan:"5"},Q=Object(d["h"])("div",{class:"modal-footer"},[Object(d["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),Object(d["h"])("button",{type:"button",class:"btn btn-primary"},"Save changes")],-1);function R(t,e,l,a,c,o){var n,s,r,i,b,h,O,u,j,p;return Object(d["w"])(),Object(d["d"])("div",v,[Object(d["h"])("div",w,[Object(d["h"])("div",g,[y,Object(d["h"])("div",M,[Object(d["h"])("div",x,[Object(d["h"])("p",null,[k,Object(d["h"])("span",null,Object(d["H"])(l.order.id),1)]),Object(d["h"])("p",null,[D,l.order.is_paid?(Object(d["w"])(),Object(d["d"])("span",H,"已付款")):(Object(d["w"])(),Object(d["d"])("span",A,"未付款"))])]),Object(d["h"])("div",$,[Object(d["h"])("div",C,[_,Object(d["h"])("ul",L,[Object(d["h"])("li",null,[S,Object(d["h"])("span",null,Object(d["H"])(new Date(1e3*(null===(n=l.order)||void 0===n?void 0:n.create_at)).toLocaleString()),1)]),Object(d["h"])("li",null,[E,Object(d["h"])("span",null,Object(d["H"])(null===(s=l.order)||void 0===s||null===(r=s.user)||void 0===r?void 0:r.email),1)]),Object(d["h"])("li",null,[P,Object(d["h"])("span",null,Object(d["H"])(null===(i=l.order)||void 0===i||null===(b=i.user)||void 0===b?void 0:b.name),1)]),Object(d["h"])("li",null,[G,Object(d["h"])("span",null,Object(d["H"])(null===(h=l.order)||void 0===h||null===(O=h.user)||void 0===O?void 0:O.tel),1)]),Object(d["h"])("li",null,[J,Object(d["h"])("span",null,Object(d["H"])(null===(u=l.order)||void 0===u||null===(j=u.user)||void 0===j?void 0:j.address),1)]),Object(d["h"])("li",null,[N,Object(d["h"])("span",null,Object(d["H"])(null===(p=l.order)||void 0===p?void 0:p.message),1)])])]),Object(d["h"])("div",T,[U,Object(d["h"])("table",q,[(Object(d["w"])(!0),Object(d["d"])(d["a"],null,Object(d["D"])(l.order.products,(function(t){return Object(d["w"])(),Object(d["d"])("tbody",{key:t.id,style:{"font-size":"6px"}},[Object(d["h"])("tr",null,[Object(d["h"])("td",z,[Object(d["h"])("img",{src:t.product.imageUrl,width:"60",height:"60",style:{"object-fit":"cover"}},null,8,["src"])]),Object(d["h"])("td",B,Object(d["H"])(t.product.title),1)]),Object(d["h"])("tr",null,[Object(d["h"])("td",F,"價格: NT. "+Object(d["H"])(t.product.price),1)]),Object(d["h"])("tr",null,[Object(d["h"])("td",I,"數量: "+Object(d["H"])(t.qty),1)])])})),128)),Object(d["h"])("tfoot",null,[Object(d["h"])("tr",null,[Object(d["h"])("td",K," 總計金額: NT. "+Object(d["H"])(l.order.total),1)])])])])])]),Q])])],512)}var V=l("7c2b"),W=l.n(V),X={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{orderModal:""}},methods:{show:function(){this.orderModal.show()},hide:function(){this.orderModal.hide()}},mounted:function(){this.orderModal=new W.a(this.$refs.orderModal)}};X.render=R;var Y=X,Z={class:"modal",ref:"orderDelModal",tabindex:"-1"},tt={class:"modal-dialog"},et={class:"modal-content"},lt=Object(d["h"])("div",{class:"modal-header bg-dark text-white"},[Object(d["h"])("h5",{class:"modal-title"},"刪除訂單"),Object(d["h"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),dt={class:"modal-body"},at=Object(d["g"])(" 確認要刪除 "),ct={class:"text-danger"},ot=Object(d["g"])(" 此筆訂單嗎？（刪除後不可再修復） "),nt={class:"modal-footer"},st=Object(d["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function rt(t,e,l,a,c,o){return Object(d["w"])(),Object(d["d"])("div",Z,[Object(d["h"])("div",tt,[Object(d["h"])("div",et,[lt,Object(d["h"])("div",dt,[Object(d["h"])("p",null,[at,Object(d["h"])("span",ct,Object(d["H"])(l.order.id),1),ot])]),Object(d["h"])("div",nt,[st,Object(d["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(e){return t.$emit("del-order",l.order.id)})}," 刪除 ")])])])],512)}var it={props:{order:{type:Object,default:function(){return{}}}},emits:["del-order"],data:function(){return{delModal:""}},mounted:function(){this.delModal=new W.a(this.$refs.orderDelModal)},methods:{show:function(){this.delModal.show()},hide:function(){this.delModal.hide()}}};it.render=rt;var bt=it,ht={class:"modal",ref:"orderDelAllModal",tabindex:"-1"},Ot={class:"modal-dialog"},ut={class:"modal-content"},jt=Object(d["f"])('<div class="modal-header bg-dark text-white"><h5 class="modal-title">刪除全部訂單</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><p> 確認要<span class="text-danger fw-bold">刪除全部</span>訂單嗎？（刪除後不可再修復） </p></div>',2),pt={class:"modal-footer"},ft=Object(d["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function mt(t,e,l,a,c,o){return Object(d["w"])(),Object(d["d"])("div",ht,[Object(d["h"])("div",Ot,[Object(d["h"])("div",ut,[jt,Object(d["h"])("div",pt,[ft,Object(d["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(e){return t.$emit("del-allOrder")})}," 刪除 ")])])])],512)}var vt={emits:["del-allOrder"],data:function(){return{delModal:""}},mounted:function(){this.delModal=new W.a(this.$refs.orderDelAllModal)},methods:{show:function(){this.delModal.show()},hide:function(){this.delModal.hide()}}};vt.render=mt;var wt=vt,gt={data:function(){return{orders:[],tempOrder:{},pagination:{}}},components:{Pagination:m["a"],OrderModal:Y,OrderDelModal:bt,OrderDelAllModal:wt},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l="".concat("https://vue3-course-api.hexschool.io","/api/").concat("smile0919a","/admin/orders?page=").concat(e);this.$http.get(l).then((function(e){if(e.data.success){var l=e.data,d=l.orders,a=l.pagination;t.orders=d,t.pagination=a}else alert(e.data.message)}))},delOrder:function(t){var e=this,l="".concat("https://vue3-course-api.hexschool.io","/api/").concat("smile0919a","/admin/order/").concat(t);this.$http.delete(l).then((function(t){t.data.success?(e.$refs.delModal.hide(),e.getOrders()):alert(t.data.message)}))},delAllOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("smile0919a","/admin/orders/all");this.$http.delete(e).then((function(e){e.data.success?(t.$refs.delAllModal.hide(),t.getOrders()):alert(e.data.message)}))},openModal:function(t){var e=this,l="".concat("https://vue3-course-api.hexschool.io","/api/").concat("smile0919a","/order/").concat(t);this.$http.get(l).then((function(t){t.data.success&&(e.tempOrder=t.data.order)})),this.$refs.modal.show()},openDelModal:function(t){this.tempOrder=Object(f["a"])({},t),this.$refs.delModal.show()},openDelAllModal:function(){this.$refs.delAllModal.show()}},created:function(){this.getOrders()}};gt.render=p;e["default"]=gt}}]);
//# sourceMappingURL=chunk-2d208d70.df44c110.js.map